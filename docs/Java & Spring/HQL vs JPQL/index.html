<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Java & Spring/HQL vs JPQL" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">HQL or JPQL? | TkBook</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://2snufkin.github.io/tk_book/img/favicon.png"><meta data-rh="true" name="twitter:image" content="https://2snufkin.github.io/tk_book/img/favicon.png"><meta data-rh="true" property="og:url" content="https://2snufkin.github.io/tk_book/docs/Java &amp; Spring/HQL vs JPQL"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="HQL or JPQL? | TkBook"><meta data-rh="true" name="description" content="In the Tumorotek project, we use JPQL rather than HQL. But what exactly is the difference between them, and how can we distinguish between the two?"><meta data-rh="true" property="og:description" content="In the Tumorotek project, we use JPQL rather than HQL. But what exactly is the difference between them, and how can we distinguish between the two?"><link data-rh="true" rel="icon" href="/tk_book/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://2snufkin.github.io/tk_book/docs/Java &amp; Spring/HQL vs JPQL"><link data-rh="true" rel="alternate" href="https://2snufkin.github.io/tk_book/docs/Java &amp; Spring/HQL vs JPQL" hreflang="en"><link data-rh="true" rel="alternate" href="https://2snufkin.github.io/tk_book/docs/Java &amp; Spring/HQL vs JPQL" hreflang="x-default"><link rel="stylesheet" href="/tk_book/assets/css/styles.5aa24b33.css">
<script src="/tk_book/assets/js/runtime~main.0d96ff95.js" defer="defer"></script>
<script src="/tk_book/assets/js/main.76a261a2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/tk_book/docs/"><div class="navbar__logo"><img src="/tk_book/img/favicon.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/tk_book/img/favicon.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">TK Book</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tk_book/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tk_book/docs/Best Practice/Best Practices In Java Development">Best Practice</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tk_book/docs/Errors/Cannotcreatetransaction">Errors</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/tk_book/docs/Java &amp; Spring/Comparing Objects">Java &amp; Spring</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/docs/Java &amp; Spring/Comparing Objects">Comparing Objects in Java</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/docs/Java &amp; Spring/Creating new Entity">Repository, Manager, and Test</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/docs/Java &amp; Spring/Dao">Dao</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/docs/Java &amp; Spring/Dependencies">Dependencies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/docs/Java &amp; Spring/Entites">Entites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/tk_book/docs/Java &amp; Spring/HQL vs JPQL">HQL or JPQL?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/docs/Java &amp; Spring/Java Modifiers Order">Java Modifiers Order</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/docs/java/jpql">JPQL Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/docs/Java &amp; Spring/Modifier">Java Modifiers Order</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/docs/Java &amp; Spring/Named Parameters vs. Positional Parameters">Named Parameters vs. Positional Parameters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/docs/Java &amp; Spring/ResourceBundle">Resource Bundles in Java</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/docs/Java &amp; Spring/Unit Tests">Testing DAO Classes:</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tk_book/docs/Libraries/Apache Poi">Libraries</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tk_book/docs/Security/Sescurity Audit">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tk_book/docs/Tumorotek/Coding Starndards">Tumorotek</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tk_book/docs/ZK/Annotations">ZK</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><span class="breadcrumbs__link">Java &amp; Spring</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">HQL or JPQL?</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>HQL or JPQL?</h1></header>
<p>In the Tumorotek project, we use JPQL rather than HQL. But what exactly is the difference between them, and how can we distinguish between the two?</p>
<p>It&#x27;s essential to understand the difference between HQL (Hibernate Query Language) and JPQL (Java Persistence Query Language). Hibernate and JPA (Java Persistence API) are two different frameworks used for Object-Relational Mapping (ORM) in Java applications. Hibernate is an implementation of the JPA specification and provides additional features beyond the JPA standard.
HQL is very similar to JPQL, which is the standard query language defined by the JPA specification. Both HQL and JPQL use entity class names and their mapped properties instead of SQL table and column names.
When using Hibernate as your JPA implementation, you can write queries in HQL, which is very similar to JPQL. However, for greater portability across various JPA implementations, it&#x27;s recommended to stick to using JPQL.
In most cases, it can be challenging to distinguish between HQL and JPQL in an existing project just by looking at the query strings, as they are quite similar. However, you can examine certain factors to determine whether JPQL or HQL is being used.</p>
<ul>
<li><strong>Import Statements:</strong> In HQL, you might see import statements specific to Hibernate classes, such as <code>import org.hibernate.Query</code>, while JPQL won&#x27;t have these Hibernate-specific imports.</li>
<li><strong>JPA Annotations:</strong> If the project uses JPA annotations like <code>@Entity</code>, <code>@Table</code>, <code>@Column</code>, etc., it&#x27;s more likely that JPQL is being used. While Hibernate supports these annotations as well, they are part of the JPA specification.</li>
<li><strong>Hibernate-specific Features:</strong> If you encounter Hibernate-specific features or annotations in the code, like <code>@Type</code> or <code>@Filter</code>, it&#x27;s a strong indicator of HQL usage.</li>
<li><strong>JPA Query API:</strong> If you see code creating TypedQuery or Query objects using JPA&#x27;s EntityManager (<code>entityManager.createQuery()</code>), it&#x27;s more likely to be JPQ</li>
</ul>
<p>Please note that these are general indicators and not definitive proof of whether H</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-jpq">Using JPQ<a href="#using-jpq" class="hash-link" aria-label="Direct link to Using JPQ" title="Direct link to Using JPQ">​</a></h2>
<p>To use JPQ in your project:</p>
<ol>
<li>Define thJPQl Q: Construct thJPQl query as a string using thJPQl syntax. You&#x27;ll use Java class names and their mapped properties instead of SQL table and column names.
2.Logging (Optional): Before executing thqueryou might want tlogthe generatedJPQl query fo debugging purposes.
3.CreateanEntityManager: Declareth entityManagerFactoryand createanEntityManagerinstance
4.CreateaTypedQuery: CreateaTypedQuery object usingthcreateQuery() method ontheEntityManagerpassingthJPQl queryasan argument
5.SetParameters: IftheJPQl query includes parameterssetthemusingthe appropriate methods (setParameter()or setXxx())ontheTypedQuery object
6.Execute thQuerynd Retrieve Results: Execute thqueryusingthe getResultList() methodto fetch alistofentities that matchthquerycriteria
7.HandletheresultsUse obtained result listas neededsuchas returningtheresultsor performingadditional operations
8.CloseresourcesOncequeryexecutionand result processingare completecloseTheEntityManagertoreleaseacquired resources
9.HandleExceptionsProperly handle any exceptionsthat may occurduringthprocessensure application stability</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices-for-writingjpqpqueriesherearesome-best-practicesfor-writingjpqpqueries">Best Practices for WritingJPQPQueriesHerearesome best practicesfor writingJPQPqueries:<a href="#best-practices-for-writingjpqpqueriesherearesome-best-practicesfor-writingjpqpqueries" class="hash-link" aria-label="Direct link to Best Practices for WritingJPQPQueriesHerearesome best practicesfor writingJPQPqueries:" title="Direct link to Best Practices for WritingJPQPQueriesHerearesome best practicesfor writingJPQPqueries:">​</a></h2>
<p>1.Entityand Property NamesUse Java entityclassnamesandtheir property namesinsteadoftableand column names fromthedatabaseEnsureproper capitalizationand spelling</p>
<p>2.AvoidDatabase-specific FunctionsHQPaimstobedatabase agnosticso avoidusingdatabase-specific functionsinyour queries</p>
<p>3.Use Parametersfor Dynamic ValuesUse query parameters(<!-- -->:paramName<!-- -->)for dynamic valuestopreventSQL injection vulnerabilities</p>
<p>4.PreferLazy FetchingUnless necessarypreferlazy fetchingfor associationsto avoid unnecessary data loading</p>
<p>5.AvoidCartesian ProductsBe cautiouswithmultiple joinsin a querytopreventCartesian productsandlarge result sets</p>
<p>6.Indexand Analyze Database TablesEnsureproper indexingandan analysisofdatabasetablesfooptimal performance</p>
<p>7.Use Batch Fetching foCollectionsConsiderbatch fetchingforcollectionsto avoidN + 1 problems</p>
<p>8.Optimize Query Fetch SizesUse setMaxResultstolimitfetched resultsespecially fo largedatasets</p>
<p>9.LeverageCachingUtilizeHibernate&#x27;s cachingmechanismstimprovequery performance</p>
<p>10.AvoidHQinLoopsAvoidexecutingHQqueries insideloopsfo performance reasons</p>
<p>11.UseQuery LogginganTuningEnablequery loggingantuningfo better performancmonitoring12Keep QueriesSimpleanReadableWritequeriesthataresimpleconciseandeasy tounderstand13Test QueriesThoroughlyTestqueriesinvrious scenariosto ensure expectedresultsanperformance14UpgradeHibernate VersionKeepHibernateup-todatefort helatest improvementsandoptimizationsBy followingthesebest practicesyoucan writeefficientsecureande maintainableJPQPqueriesfoyour Java applications.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h2>
<p>Assuming you have two entity classes: Employee and Department, with a one-to-many relationship. The JPQL query for performing a JOIN between these entities could look like this:</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/tk_book/docs/Java &amp; Spring/Entites"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Entites</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tk_book/docs/Java &amp; Spring/Java Modifiers Order"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Java Modifiers Order</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#using-jpq" class="table-of-contents__link toc-highlight">Using JPQ</a></li><li><a href="#best-practices-for-writingjpqpqueriesherearesome-best-practicesfor-writingjpqpqueries" class="table-of-contents__link toc-highlight">Best Practices for WritingJPQPQueriesHerearesome best practicesfor writingJPQPqueries:</a></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>