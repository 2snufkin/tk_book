<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Java & Spring/HQL vs JPQL" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">HQL or JPQL? | TkBook</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://2snufkin.github.io/tk_book/img/favicon.png"><meta data-rh="true" name="twitter:image" content="https://2snufkin.github.io/tk_book/img/favicon.png"><meta data-rh="true" property="og:url" content="https://2snufkin.github.io/tk_book/Java &amp; Spring/HQL vs JPQL/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="HQL or JPQL? | TkBook"><meta data-rh="true" name="description" content="In the Tumorotek project, we use JPQL rather than HQL. But what exactly is the difference between them, and how can we distinguish between the two?"><meta data-rh="true" property="og:description" content="In the Tumorotek project, we use JPQL rather than HQL. But what exactly is the difference between them, and how can we distinguish between the two?"><link data-rh="true" rel="icon" href="/tk_book/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://2snufkin.github.io/tk_book/Java &amp; Spring/HQL vs JPQL/"><link data-rh="true" rel="alternate" href="https://2snufkin.github.io/tk_book/Java &amp; Spring/HQL vs JPQL/" hreflang="en"><link data-rh="true" rel="alternate" href="https://2snufkin.github.io/tk_book/Java &amp; Spring/HQL vs JPQL/" hreflang="x-default"><link rel="stylesheet" href="/tk_book/assets/css/styles.f30a109f.css">
<script src="/tk_book/assets/js/runtime~main.9d236950.js" defer="defer"></script>
<script src="/tk_book/assets/js/main.088c36a9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/tk_book/"><div class="navbar__logo"><img src="/tk_book/img/favicon.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/tk_book/img/favicon.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">TK Book</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tk_book/Best Practice/Best Practices In Java Development/">Best Practice</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tk_book/Errors/Accessing Inaccessible Attribute/">Errors</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/tk_book/Java &amp; Spring/Comparing Objects/">Java &amp; Spring</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/Java &amp; Spring/Comparing Objects/">Comparing Objects in Java</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/Java &amp; Spring/Creating new Entity/">Repository, Manager, and Test</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/Java &amp; Spring/DAO Implementation/">DAO Implementation Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/Java &amp; Spring/Entites/">Entites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/tk_book/Java &amp; Spring/HQL vs JPQL/">HQL or JPQL?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/Java &amp; Spring/Java Modifiers Order/">Java Modifiers Order</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/Java &amp; Spring/Named Parameters vs. Positional Parameters/">Named Parameters vs. Positional Parameters in JPA/Hibernate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/Java &amp; Spring/ResourceBundle/">Resource Bundles in Java</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tk_book/Java &amp; Spring/SQL Stored Procedures/">SQL Stored Procedures</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tk_book/Libraries/Apache Poi - Performance/">Libraries</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tk_book/Security/Dependencies/">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tk_book/Tumorotek/General/Code Formatting/">Tumorotek</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tk_book/ZK/Annotations/">ZK</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tk_book/">Introduction</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/tk_book/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Java &amp; Spring</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">HQL or JPQL?</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>HQL or JPQL?</h1></header>
<p>In the Tumorotek project, we use JPQL rather than HQL. But what exactly is the difference between them, and how can we distinguish between the two?</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-the-difference">Understanding the Difference<a href="#understanding-the-difference" class="hash-link" aria-label="Direct link to Understanding the Difference" title="Direct link to Understanding the Difference">​</a></h2>
<p>It&#x27;s essential to understand the difference between HQL (Hibernate Query Language) and JPQL (Java Persistence Query Language). Hibernate and JPA (Java Persistence API) are two different frameworks used for Object-Relational Mapping (ORM) in Java applications. Hibernate is an implementation of the JPA specification and provides additional features beyond the JPA standard.</p>
<p>HQL is very similar to JPQL, which is the standard query language defined by the JPA specification. Both HQL and JPQL use entity class names and their mapped properties instead of SQL table and column names.</p>
<p>When using Hibernate as your JPA implementation, you can write queries in HQL, which is very similar to JPQL. However, for greater portability across various JPA implementations, it&#x27;s recommended to stick to using JPQL.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-identify-hql-vs-jpql">How to Identify HQL vs JPQL<a href="#how-to-identify-hql-vs-jpql" class="hash-link" aria-label="Direct link to How to Identify HQL vs JPQL" title="Direct link to How to Identify HQL vs JPQL">​</a></h3>
<p>In most cases, it can be challenging to distinguish between HQL and JPQL in an existing project just by looking at the query strings, as they are quite similar. However, you can examine certain factors to determine whether JPQL or HQL is being used:</p>
<ul>
<li><strong>Import Statements:</strong> In HQL, you might see import statements specific to Hibernate classes, such as <code>org.hibernate.Query</code>, while JPQL won&#x27;t have these Hibernate-specific imports.</li>
<li><strong>JPA Annotations:</strong> If the project uses JPA annotations like <code>@Entity</code>, <code>@Table</code>, <code>@Column</code>, etc., it&#x27;s more likely that JPQL is being used. While Hibernate supports these annotations as well, they are part of the JPA specification.</li>
<li><strong>Hibernate-specific Features:</strong> If you encounter Hibernate-specific features or annotations in the code, like <code>@Type</code> or <code>@Filter</code>, it&#x27;s a strong indicator of HQL usage.</li>
<li><strong>JPA Query API:</strong> If you see code creating TypedQuery or Query objects using JPA&#x27;s EntityManager (<code>entityManager.createQuery()</code>), it&#x27;s more likely to be JPQL.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-jpql">Using JPQL<a href="#using-jpql" class="hash-link" aria-label="Direct link to Using JPQL" title="Direct link to Using JPQL">​</a></h2>
<p>To use JPQL in your project:</p>
<ol>
<li><strong>Define the JPQL Query:</strong> Construct the JPQL query as a string using JPQL syntax. Use Java class names and their mapped properties instead of SQL table and column names.</li>
<li><strong>Logging (Optional):</strong> Before executing the query, you might want to log the generated JPQL query for debugging purposes.</li>
<li><strong>Create an EntityManager:</strong> Declare the EntityManagerFactory and create an EntityManager instance.</li>
<li><strong>Create a TypedQuery:</strong> Create a TypedQuery object using the <code>createQuery()</code> method on the EntityManager, passing the JPQL query as an argument.</li>
<li><strong>Set Parameters:</strong> If the JPQL query includes parameters, set them using the appropriate methods (<code>setParameter()</code> or <code>setXxx()</code>) on the TypedQuery object.</li>
<li><strong>Execute the Query:</strong> Use <code>getResultList()</code> or <code>getSingleResult()</code> to execute the query and retrieve results.</li>
<li><strong>Handle Results:</strong> Process the obtained results as needed.</li>
<li><strong>Close Resources:</strong> Close the EntityManager to release acquired resources.</li>
<li><strong>Handle Exceptions:</strong> Properly handle any exceptions that may occur.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices-for-writing-jpql-queries">Best Practices for Writing JPQL Queries<a href="#best-practices-for-writing-jpql-queries" class="hash-link" aria-label="Direct link to Best Practices for Writing JPQL Queries" title="Direct link to Best Practices for Writing JPQL Queries">​</a></h2>
<ol>
<li>
<p><strong>Entity and Property Names:</strong></p>
<ul>
<li>Use Java entity class names and their property names</li>
<li>Ensure proper capitalization and spelling</li>
</ul>
</li>
<li>
<p><strong>Security and Performance:</strong></p>
<ul>
<li>Use parameters for dynamic values to prevent SQL injection</li>
<li>Prefer lazy fetching unless necessary</li>
<li>Avoid Cartesian products</li>
<li>Use batch fetching for collections</li>
<li>Optimize query fetch sizes</li>
</ul>
</li>
<li>
<p><strong>Maintainability:</strong></p>
<ul>
<li>Keep queries simple and readable</li>
<li>Avoid database-specific functions</li>
<li>Test queries thoroughly</li>
<li>Enable query logging for debugging</li>
</ul>
</li>
<li>
<p><strong>Performance Optimization:</strong></p>
<ul>
<li>Ensure proper indexing of database tables</li>
<li>Utilize caching mechanisms</li>
<li>Avoid executing queries in loops</li>
<li>Keep Hibernate version up to date</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h2>
<p>Assuming you have two entity classes: Employee and Department, with a one-to-many relationship. Here&#x27;s a JPQL query example:</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/tk_book/Java &amp; Spring/Entites/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Entites</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tk_book/Java &amp; Spring/Java Modifiers Order/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Java Modifiers Order</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#understanding-the-difference" class="table-of-contents__link toc-highlight">Understanding the Difference</a><ul><li><a href="#how-to-identify-hql-vs-jpql" class="table-of-contents__link toc-highlight">How to Identify HQL vs JPQL</a></li></ul></li><li><a href="#using-jpql" class="table-of-contents__link toc-highlight">Using JPQL</a></li><li><a href="#best-practices-for-writing-jpql-queries" class="table-of-contents__link toc-highlight">Best Practices for Writing JPQL Queries</a></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>