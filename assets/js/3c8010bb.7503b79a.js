"use strict";(self.webpackChunktkbook=self.webpackChunktkbook||[]).push([[1314],{8966:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>l});var i=n(4848),r=n(8453);const s={},a="HQL or JPQL?",o={id:"Java & Spring/HQL vs JPQL",title:"HQL or JPQL?",description:"In the Tumorotek project, we use JPQL rather than HQL. But what exactly is the difference between them, and how can we distinguish between the two?",source:"@site/docs/Java & Spring/HQL vs JPQL.md",sourceDirName:"Java & Spring",slug:"/Java & Spring/HQL vs JPQL",permalink:"/tk_book/docs/Java & Spring/HQL vs JPQL",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Entites",permalink:"/tk_book/docs/Java & Spring/Entites"},next:{title:"Java Modifiers Order",permalink:"/tk_book/docs/Java & Spring/Java Modifiers Order"}},c={},l=[{value:"Using JPQ",id:"using-jpq",level:2},{value:"Best Practices for WritingJPQPQueriesHerearesome best practicesfor writingJPQPqueries:",id:"best-practices-for-writingjpqpqueriesherearesome-best-practicesfor-writingjpqpqueries",level:2},{value:"Example",id:"example",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"hql-or-jpql",children:"HQL or JPQL?"})}),"\n",(0,i.jsx)(t.p,{children:"In the Tumorotek project, we use JPQL rather than HQL. But what exactly is the difference between them, and how can we distinguish between the two?"}),"\n",(0,i.jsx)(t.p,{children:"It's essential to understand the difference between HQL (Hibernate Query Language) and JPQL (Java Persistence Query Language). Hibernate and JPA (Java Persistence API) are two different frameworks used for Object-Relational Mapping (ORM) in Java applications. Hibernate is an implementation of the JPA specification and provides additional features beyond the JPA standard.\nHQL is very similar to JPQL, which is the standard query language defined by the JPA specification. Both HQL and JPQL use entity class names and their mapped properties instead of SQL table and column names.\nWhen using Hibernate as your JPA implementation, you can write queries in HQL, which is very similar to JPQL. However, for greater portability across various JPA implementations, it's recommended to stick to using JPQL.\nIn most cases, it can be challenging to distinguish between HQL and JPQL in an existing project just by looking at the query strings, as they are quite similar. However, you can examine certain factors to determine whether JPQL or HQL is being used."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Import Statements:"})," In HQL, you might see import statements specific to Hibernate classes, such as ",(0,i.jsx)(t.code,{children:"import org.hibernate.Query"}),", while JPQL won't have these Hibernate-specific imports."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"JPA Annotations:"})," If the project uses JPA annotations like ",(0,i.jsx)(t.code,{children:"@Entity"}),", ",(0,i.jsx)(t.code,{children:"@Table"}),", ",(0,i.jsx)(t.code,{children:"@Column"}),", etc., it's more likely that JPQL is being used. While Hibernate supports these annotations as well, they are part of the JPA specification."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Hibernate-specific Features:"})," If you encounter Hibernate-specific features or annotations in the code, like ",(0,i.jsx)(t.code,{children:"@Type"})," or ",(0,i.jsx)(t.code,{children:"@Filter"}),", it's a strong indicator of HQL usage."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"JPA Query API:"})," If you see code creating TypedQuery or Query objects using JPA's EntityManager (",(0,i.jsx)(t.code,{children:"entityManager.createQuery()"}),"), it's more likely to be JPQ"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Please note that these are general indicators and not definitive proof of whether H"}),"\n",(0,i.jsx)(t.h2,{id:"using-jpq",children:"Using JPQ"}),"\n",(0,i.jsx)(t.p,{children:"To use JPQ in your project:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Define thJPQl Q: Construct thJPQl query as a string using thJPQl syntax. You'll use Java class names and their mapped properties instead of SQL table and column names.\n2.Logging (Optional): Before executing thqueryou might want tlogthe generatedJPQl query fo debugging purposes.\n3.CreateanEntityManager: Declareth entityManagerFactoryand createanEntityManagerinstance\n4.CreateaTypedQuery: CreateaTypedQuery object usingthcreateQuery() method ontheEntityManagerpassingthJPQl queryasan argument\n5.SetParameters: IftheJPQl query includes parameterssetthemusingthe appropriate methods (setParameter()or setXxx())ontheTypedQuery object\n6.Execute thQuerynd Retrieve Results: Execute thqueryusingthe getResultList() methodto fetch alistofentities that matchthquerycriteria\n7.HandletheresultsUse obtained result listas neededsuchas returningtheresultsor performingadditional operations\n8.CloseresourcesOncequeryexecutionand result processingare completecloseTheEntityManagertoreleaseacquired resources\n9.HandleExceptionsProperly handle any exceptionsthat may occurduringthprocessensure application stability"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"best-practices-for-writingjpqpqueriesherearesome-best-practicesfor-writingjpqpqueries",children:"Best Practices for WritingJPQPQueriesHerearesome best practicesfor writingJPQPqueries:"}),"\n",(0,i.jsx)(t.p,{children:"1.Entityand Property NamesUse Java entityclassnamesandtheir property namesinsteadoftableand column names fromthedatabaseEnsureproper capitalizationand spelling"}),"\n",(0,i.jsx)(t.p,{children:"2.AvoidDatabase-specific FunctionsHQPaimstobedatabase agnosticso avoidusingdatabase-specific functionsinyour queries"}),"\n",(0,i.jsxs)(t.p,{children:["3.Use Parametersfor Dynamic ValuesUse query parameters(",":paramName",")for dynamic valuestopreventSQL injection vulnerabilities"]}),"\n",(0,i.jsx)(t.p,{children:"4.PreferLazy FetchingUnless necessarypreferlazy fetchingfor associationsto avoid unnecessary data loading"}),"\n",(0,i.jsx)(t.p,{children:"5.AvoidCartesian ProductsBe cautiouswithmultiple joinsin a querytopreventCartesian productsandlarge result sets"}),"\n",(0,i.jsx)(t.p,{children:"6.Indexand Analyze Database TablesEnsureproper indexingandan analysisofdatabasetablesfooptimal performance"}),"\n",(0,i.jsx)(t.p,{children:"7.Use Batch Fetching foCollectionsConsiderbatch fetchingforcollectionsto avoidN + 1 problems"}),"\n",(0,i.jsx)(t.p,{children:"8.Optimize Query Fetch SizesUse setMaxResultstolimitfetched resultsespecially fo largedatasets"}),"\n",(0,i.jsx)(t.p,{children:"9.LeverageCachingUtilizeHibernate's cachingmechanismstimprovequery performance"}),"\n",(0,i.jsx)(t.p,{children:"10.AvoidHQinLoopsAvoidexecutingHQqueries insideloopsfo performance reasons"}),"\n",(0,i.jsx)(t.p,{children:"11.UseQuery LogginganTuningEnablequery loggingantuningfo better performancmonitoring12Keep QueriesSimpleanReadableWritequeriesthataresimpleconciseandeasy tounderstand13Test QueriesThoroughlyTestqueriesinvrious scenariosto ensure expectedresultsanperformance14UpgradeHibernate VersionKeepHibernateup-todatefort helatest improvementsandoptimizationsBy followingthesebest practicesyoucan writeefficientsecureande maintainableJPQPqueriesfoyour Java applications."}),"\n",(0,i.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(t.p,{children:"Assuming you have two entity classes: Employee and Department, with a one-to-many relationship. The JPQL query for performing a JOIN between these entities could look like this:"})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>o});var i=n(6540);const r={},s=i.createContext(r);function a(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);