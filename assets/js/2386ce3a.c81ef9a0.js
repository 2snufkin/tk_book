"use strict";(self.webpackChunktkbook=self.webpackChunktkbook||[]).push([[188],{5809:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var i=s(4848),t=s(8453);const o={},a="Liquibase Checksum Validation Issue",c={id:"Errors/Liquibase Checksum Validation Issue",title:"Liquibase Checksum Validation Issue",description:"Checksum validation issues in Liquibase can be resolved by updating the checksums in the DATABASECHANGELOG table to match the modified changesets. It's crucial to carefully review and document any intentional changes made to the changelog files to maintain consistency in the database schema evolution process.",source:"@site/docs/Errors/Liquibase Checksum Validation Issue.md",sourceDirName:"Errors",slug:"/Errors/Liquibase Checksum Validation Issue",permalink:"/tk_book/docs/Errors/Liquibase Checksum Validation Issue",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Entities",permalink:"/tk_book/docs/Errors/Ententies"},next:{title:"Problem In Line",permalink:"/tk_book/docs/Errors/Problem In Line"}},r={},l=[{value:"Liquibase Checksum Validation Issue and Resolution",id:"liquibase-checksum-validation-issue-and-resolution",level:2},{value:"Problem Overview",id:"problem-overview",level:3},{value:"Causes of the Issue",id:"causes-of-the-issue",level:3},{value:"Resolution Steps",id:"resolution-steps",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"liquibase-checksum-validation-issue",children:"Liquibase Checksum Validation Issue"})}),"\n",(0,i.jsxs)(n.p,{children:["Checksum validation issues in Liquibase can be resolved by updating the checksums in the ",(0,i.jsx)(n.code,{children:"DATABASECHANGELOG"})," table to match the modified changesets. It's crucial to carefully review and document any intentional changes made to the changelog files to maintain consistency in the database schema evolution process."]}),"\n",(0,i.jsx)(n.h2,{id:"liquibase-checksum-validation-issue-and-resolution",children:"Liquibase Checksum Validation Issue and Resolution"}),"\n",(0,i.jsx)(n.h3,{id:"problem-overview",children:"Problem Overview"}),"\n",(0,i.jsx)(n.p,{children:"Liquibase uses checksums to ensure the consistency of changesets in your database schema. When the content of a changeset is modified without updating the corresponding checksum, Liquibase will detect a validation failure during the update process. This validation failure is indicated by an error message similar to the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"liquibase.exception.ValidationFailedException: Validation Failed:\n  X change sets check sum\n  ...\n"})}),"\n",(0,i.jsx)(n.h3,{id:"causes-of-the-issue",children:"Causes of the Issue"}),"\n",(0,i.jsx)(n.p,{children:"The checksum validation issue typically arises when changesets are intentionally modified without updating the checksums. This can happen during development or schema evolution when SQL statements within a changeset are added, modified, or removed."}),"\n",(0,i.jsx)(n.h3,{id:"resolution-steps",children:"Resolution Steps"}),"\n",(0,i.jsx)(n.p,{children:"To resolve the checksum validation issue, follow these steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Identify Changes:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Open each changelog file mentioned in the error message."}),"\n",(0,i.jsx)(n.li,{children:"Identify the changes made to the SQL statements within each changeset."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Update Checksums:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If you intentionally modified the changesets, update the checksums manually to match the new content."}),"\n",(0,i.jsxs)(n.li,{children:["Use the following SQL command to update the checksum in the ",(0,i.jsx)(n.code,{children:"DATABASECHANGELOG"})," table for the affected changeset.","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"UPDATE DATABASECHANGELOG SET MD5SUM='8:NEW_CHECKSUM_VALUE' WHERE MD5SUM='8:OLD_CHECKSUM_VALUE';\n"})}),"\n","Replace ",(0,i.jsx)(n.code,{children:"NEW_CHECKSUM_VALUE"})," with the new checksum and ",(0,i.jsx)(n.code,{children:"OLD_CHECKSUM_VALUE"})," with the old checksum for the changeset."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Run SQL Command:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Open your command prompt (CMD) on Windows or terminal on Linux/Mac."}),"\n",(0,i.jsxs)(n.li,{children:["Type ",(0,i.jsx)(n.code,{children:"mysql -u your_username -p"})," and press Enter."]}),"\n",(0,i.jsxs)(n.li,{children:["Once logged in, switch to your database using ",(0,i.jsx)(n.code,{children:"USE your_database_name"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Run your UPDATE SQL statement."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"Caused by: liquibase.exception.DatabaseException: This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in its declaration and binary logging is enabled (you might want to use..."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Adjust log_bin_trust_function_creators:"}),"\nYou may need to adjust MySQL server setting ",(0,i.jsx)(n.code,{children:"log_bin_trust_function_creators"}),". This setting determines whether non-deterministic functions can execute in a binary logging context.\nYou can set it dynamically with:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"SET GLOBAL log_bin_trust_function_creators = 1;\n"})}),"\n",(0,i.jsx)(n.p,{children:"Be aware that enabling this setting allows non-deterministic functions creation which may have security implications. Understand these implications before making any change."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var i=s(6540);const t={},o=i.createContext(t);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);